
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#api-reference" class="toc-h1 toc-link" data-title="api-reference">API reference</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="authentication">Authentication</a>
          </li>
          <li>
            <a href="#tracking-api" class="toc-h1 toc-link" data-title="tracking-api">Tracking API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#tracking-leads-and-sign-ups" class="toc-h2 toc-link" data-title="tracking-leads-and-sign-ups">Tracking leads and sign-ups</a>
                  </li>
                  <li>
                    <a href="#tracking-sales-and-commissions" class="toc-h2 toc-link" data-title="tracking-sales-and-commissions">Tracking sales and commissions</a>
                  </li>
                  <li>
                    <a href="#tracking-refunds-and-negative-commissions" class="toc-h2 toc-link" data-title="tracking-refunds-and-negative-commissions">Tracking refunds and negative commissions</a>
                  </li>
                  <li>
                    <a href="#tracking-cancellations" class="toc-h2 toc-link" data-title="tracking-cancellations">Tracking cancellations</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="errors">Errors</a>
          </li>
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='api-reference'>API reference</h1>
<p>This is the public API documentation for FirstPromoter.</p>

<p>All our API calls are sent using the usual key-value pair parameters(see in the right), not JSON. The responses however are in JSON format.</p>
<h1 id='authentication'>Authentication</h1><pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"api_endpoint_here"</span>
  -d <span class="s2">"param1=value"</span>
  -d <span class="s2">"param2=value2"</span>
  -H <span class="s2">"x-api-key: {apikey}"</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code>{apikey}</code> with your API key.</p>
</blockquote>

<p>FirstPromoter uses API key to authorize the API requests. The API key can be
found on your Settings page - login to FirstPromoter and click &quot;Settings&quot; button from the top bar.</p>

<p>FirstPromoter expects for the API key to be included in all API requests to the server in a header that looks like the following:</p>

<p><code>x-api-key: {apikey}</code></p>

<aside class="notice">
You must replace <code>{apikey}</code> with your account API key.
</aside>
<h1 id='tracking-api'>Tracking API</h1>
<p>Our tracking API allows companies to track any type of signups, sales, cancellations and refunds for any billing provider, you are not limited to our built-in integrations with Stripe, Chargebee, Recurly and Braintree.</p>

<p>In order to send a Tracking API call you&#39;ll need to pass the custom tracking integration ID(wid) as parameter with every call. Note: other API calls do not require this.</p>

<p><strong>To get your Integration ID(wid):</strong></p>

<ol>
<li>click &quot;Settings&quot; button from the top bar</li>
<li>click on &quot;Integrations&quot; button</li>
<li>click on &quot;Setup&quot; button on the &quot;Tracking API&quot; integration</li>
</ol>
<h2 id='tracking-leads-and-sign-ups'>Tracking leads and sign-ups</h2><pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://firstpromoter.com/api/v1/track/signup"</span>
  -d <span class="s2">"wid=b850ac4wer56hy1b5ef41"</span>
  -d <span class="s2">"email=shelley@example.com"</span>
  -d <span class="s2">"first_name=Shelley"</span>
  -d <span class="s2">"uid=cbdemo_shelley"</span>
  -d <span class="s2">"tid=3491ff2f-7803-4467-8863-15b54frt8dyy"</span>
  -H <span class="s2">"x-api-key: 2947d4543695e7cc7dhda3c52ebyt74eb8"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1707</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signup"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lead"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">943</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signup"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shelley"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shelley@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cbdemo_shelley"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_since"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"plan_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="s2">"suspicion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no_suspicion"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"promoter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1983</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cust_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"temp_password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"u1PptB"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"default_promotion_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1986</span><span class="p">,</span><span class="w">
    </span><span class="s2">"default_ref_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_ref_id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"earnings_balance"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"current_balance"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paid_balance"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>With this call you can track the referral signs-ups server-side. This is not for tracking the actual sales and commissions.</p>

<p>Sign-ups are tracked as leads in FirstPromoter so when a person referred by the promoter/affiliate signs up, a new lead should be added inside FirstPromoter (you can see them inside the &quot;Leads&quot; section).</p>

<p>The recommended way to do this is to grab the <strong>_fprom_track</strong> cookie value(which keeps the tracking id and referral identification) on your server and send it along with the sign-up data through the <strong>tid</strong> parameter.</p>

<p><strong><em>Alternative</em></strong>: In some special cases, you can refer sign ups directly to a promoter, by passing the referral id through <strong>ref_id</strong> parameter. Be careful using this because the referral id can be modified by the promoter by default, however you can disable that from the campaign configuration page.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://firstpromoter.com/api/v1/track/signup</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>wid</td>
<td>yes</td>
<td>integration id. <a href="#tracking-api">How to get the it?</a></td>
</tr>
<tr>
<td>email</td>
<td>yes</td>
<td>email of the lead/sign-up</td>
</tr>
<tr>
<td>uid</td>
<td>no</td>
<td>id to match the sale with the lead if the email can be changed before the first sale. If the sales are tracked by our built-in integrations and not by our API, the &quot;uid&quot; must match customer ID on Stripe, Braintree, Chargebee, Recurly. Since Stripe doesn&#39;t allow pre-defined customer id, you can also pass the &quot;uid&quot; value as &quot;fp_uid&quot; in customer metadata later, when you create the customer object.</td>
</tr>
<tr>
<td>first_name</td>
<td>no</td>
<td>you can add the full name here in case you don&#39;t have access to both first and last name separately</td>
</tr>
<tr>
<td>last_name</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td>tid</td>
<td>required if ref_id is null</td>
<td>visitor tracking id. It&#39;s set when the visitor tracking script tracks the referral visit on our system. The value is found inside &quot;_fprom_track&quot; cookie. Grab that value from the cookie and pass it here to match the lead with the referral.</td>
</tr>
<tr>
<td>ref_id</td>
<td>required if tid is null</td>
<td>default referral id of the promoter. Use this only when you want to assign the lead to a specific promoter.</td>
</tr>
<tr>
<td>ip</td>
<td>no</td>
<td>IP of the visitor who generated the sign up. It&#39;s used for fraud analysis.</td>
</tr>
</tbody></table>
<h2 id='tracking-sales-and-commissions'>Tracking sales and commissions</h2><pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://firstpromoter.com/api/v1/track/sale"</span>
  -d <span class="s2">"wid=b850ac4wer56hy1b5ef41"</span>
  -d <span class="s2">"email=shelley@example.com"</span>
  -d <span class="s2">"uid=cbdemo_shelley"</span>
  -d <span class="s2">"event_id=9856044"</span>
  -d <span class="s2">"plan=monthly-starter"</span>
  -d <span class="s2">"amount=6000"</span>
  -H <span class="s2">"x-api-key: 2947d4543695e7cc7dhda3c52ebyt74eb8"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1708</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sale"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">6000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lead"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">943</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shelley"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shelley@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cbdemo_shelley"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_since"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-11T14:54:32.014Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"plan_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly-starter"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"suspicion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no_suspicion"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"promoter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1983</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cust_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"temp_password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"u1PptB"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"default_promotion_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1986</span><span class="p">,</span><span class="w">
    </span><span class="s2">"default_ref_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_ref_id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"earnings_balance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"cash"</span><span class="p">:</span><span class="w"> </span><span class="mi">1200</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"current_balance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"cash"</span><span class="p">:</span><span class="w"> </span><span class="mi">1200</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"paid_balance"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>To track sales and generate commissions correctly, you need to use this API call each time a non-zero amount sale is processed in your system, even if it comes from a recurring charge or one-time charge.</p>

<p>To avoid fraudulent sales, we don&#39;t use JS conversions pixels to track sales, which are very unreliable and can be faked easily. Instead, we use server-side tracking for all sales to make sure that a sale is tracked only when you actually get money in your billing account. To keep the same standards with the API, we recommend to make the sale API call(this call) only when you receive the confirmation of the sale from your billing provider, like from a webhook, an IPN or a success response from an API charge call.</p>

<p>You just need to pass the sale amount(before taxes) and we&#39;ll take care of the rest. The commissions/rewards will be calculated based on that amount and the plan id, in case you use the plan-level rewards feature.</p>

<p>Using email or uid parameters we identify the lead/customer who generated the sale which also helps us determine the promoter who owns the reward/commission. The lead is added inside our system either by the client signup tracking script when the user signs up or by calling the signup API endpoint.</p>

<p><strong>If we don&#39;t find the lead on our system, it means that the sale is not a referral sale and you&#39;ll get a 204 response. You don&#39;t have to identify yourself which sale is from referrals and which is not, we&#39;ll take care of that.</strong></p>

<aside class="notice">
Note: <strong>amount</strong> and <strong>mrr</strong> parameters takes the value in cents, so if you track the amounts as float values in your system you need to <strong>multiply by 100</strong> before sending the request.
</aside>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://firstpromoter.com/api/v1/track/sale</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>yes</td>
<td>email of the lead/sign-up</td>
</tr>
<tr>
<td>event_id</td>
<td>yes</td>
<td>transaction or charge ID. It&#39;s required to avoid generating duplicate commissions/rewards in case you mistakenly send the same API call multiple times.</td>
</tr>
<tr>
<td>amount</td>
<td>yes</td>
<td>the sale amount in cents before taxes and with discounts applied to it. It&#39;s used to calculate the commissions/rewards.</td>
</tr>
<tr>
<td>uid</td>
<td>no</td>
<td>uid of the lead added on signup tracking</td>
</tr>
<tr>
<td>first_name</td>
<td>no</td>
<td>update lead first name</td>
</tr>
<tr>
<td>last_name</td>
<td>no</td>
<td>update lead last name</td>
</tr>
<tr>
<td>plan</td>
<td>no</td>
<td>customer plan ID from the billing provider. It&#39;s used to calculate rewards in case you use plan-level rewards feature.</td>
</tr>
<tr>
<td>mrr</td>
<td>no</td>
<td>sets the Monthly Recurring Revenue generated by the customer. It&#39;s used only for calculating the MRR generated by the program, not for calculating the commissions.</td>
</tr>
<tr>
<td>promo_code</td>
<td>no</td>
<td>for promo code/coupon code tracking. If you gave a unique coupon to a promoter and you added it on his promotion, you can pass it here and it will CREATE a new lead and a sale for that promoter(if doesn&#39;t exists already).</td>
</tr>
</tbody></table>
<h2 id='tracking-refunds-and-negative-commissions'>Tracking refunds and negative commissions</h2><pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://firstpromoter.com/api/v1/track/refund"</span>
  -d <span class="s2">"wid=b850ac4wer56hy1b5ef41"</span>
  -d <span class="s2">"email=shelley@example.com"</span>
  -d <span class="s2">"uid=cbdemo_shelley"</span>
  -d <span class="s2">"event_id=4567044"</span>
  -d <span class="s2">"sale_event_id=9856044"</span>
  -d <span class="s2">"amount=6000"</span>
  -H <span class="s2">"x-api-key: 2947d4543695e7cc7dhda3c52ebyt74eb8"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1709</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refund"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">-6000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lead"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">943</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shelley"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shelley@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cbdemo_shelley"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_since"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-11T14:54:32.014Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"plan_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly-starter"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"suspicion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no_suspicion"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"promoter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1983</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cust_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"temp_password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"u1PptB"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"default_promotion_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1986</span><span class="p">,</span><span class="w">
    </span><span class="s2">"default_ref_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_ref_id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"earnings_balance"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"current_balance"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paid_balance"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Refund call is similar with the sale call. It works the same way, just that it will produce negative commissions.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST https://firstpromoter.com/api/v1/track/refund</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>yes</td>
<td>email of the lead/sign-up</td>
</tr>
<tr>
<td>event_id</td>
<td>yes</td>
<td>transaction or refund event ID. It&#39;s required to avoid generating duplicate refunds in case you mistakenly send the same API call multiple times.</td>
</tr>
<tr>
<td>amount</td>
<td>yes</td>
<td>the refund amount in cents. It&#39;s used to calculate the negative commissions/rewards.</td>
</tr>
<tr>
<td>uid</td>
<td>no</td>
<td>uid of the lead added on signup tracking</td>
</tr>
<tr>
<td>sale_event_id</td>
<td>no</td>
<td>the event id of the sale for which the refund is processed. This value must match the event_id value sent in the sale tracking API call. (Note: This field is marked as optional, but if you track multiple products or change the commissions level often, it becomes required to track refunds correctly)</td>
</tr>
</tbody></table>
<h2 id='tracking-cancellations'>Tracking cancellations</h2><pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://firstpromoter.com/api/v1/track/cancellation"</span>
  -d <span class="s2">"wid=b850ac4wer56hy1b5ef41"</span>
  -d <span class="s2">"email=shelley@example.com"</span>
  -d <span class="s2">"uid=cbdemo_shelley"</span>
  -H <span class="s2">"x-api-key: 2947d4543695e7cc7dhda3c52ebyt74eb8"</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1710</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancellation"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_cents"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lead"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">943</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shelley"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shelley@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cbdemo_shelley"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_since"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-11T14:54:32.014Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"plan_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly-starter"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"suspicion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no_suspicion"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"promoter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1983</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cust_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"temp_password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"u1PptB"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"default_promotion_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1986</span><span class="p">,</span><span class="w">
    </span><span class="s2">"default_ref_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_ref_id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"earnings_balance"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"current_balance"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paid_balance"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This call will mark the customer as cancelled and will decrease the MRR generated by him/her.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST https://firstpromoter.com/api/v1/track/cancellation</code></p>
<h3 id='url-parameters-3'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>yes</td>
<td>email of the lead/sign-up</td>
</tr>
<tr>
<td>uid</td>
<td>no</td>
<td>uid of the lead added on signup tracking</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<aside class="notice">
This error section is stored in a separate file in <code>includes/_errors.md</code>. Slate allows you to optionally separate out your docs into many files...just save them to the <code>includes</code> folder and add them to the top of your <code>index.md</code>'s frontmatter. Files are included in the order listed.
</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The kitten requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified kitten could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a kitten with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The kitten requested has been removed from our servers.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
